import{w as e}from"./with-resolvers-CHEvl4oe.js";import{s,d as t}from"./sender-DL3isFNg.js";import{i as r}from"./i32-C78nBJH2.js";import{b as o}from"./shared-D1EE5wug.js";import"./channel-DQBWE7_E.js";const{promise:a,resolve:n}=e();addEventListener("message",({data:[e,s,t]})=>n([s,t]),{once:!0});const d="async";var i=n=>a.then(([a,d])=>(postMessage(1),((s,a)=>{const n=new BroadcastChannel(s),d=r(),i=(a.decoder??t)({byteOffset:o}),m=new Map;return n.addEventListener("message",({data:[e,{length:s,buffer:t}]})=>{m.get(e)(a.onsync(s?i(s,t):void 0)),m.delete(e)}),(s,...t)=>{const{promise:r,resolve:o}=e(),a=d();return m.set(a,o),n.postMessage([a,s],...t),r}})(d,s({...a,...n}))));export{d as channel,i as default};
