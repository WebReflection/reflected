import{w as e}from"./with-resolvers-CHEvl4oe.js";import{i as s}from"./i32-C78nBJH2.js";import{s as t}from"./sender-23_Enxlo.js";import"./channel-BwDpH9fR.js";const{promise:a,resolve:r}=e();addEventListener("message",({data:[e,s,t]})=>r([e,s,t]),{once:!0});const n="async";var o=r=>a.then(([a,n,o])=>(postMessage(1),((t,a,r)=>{const n=new BroadcastChannel(t),o=s(),d=new Map;return n.addEventListener("message",({data:[e,s]})=>{const[t,n]=d.get(e);a.set(s,0),t(r.ondata(a.subarray(2,2+a[1])))}),(s,...t)=>{const{promise:a,resolve:r}=e(),i=o();return d.set(i,[r,t]),n.postMessage([i,s],...t),a}})(o,new Int32Array(a),t({...n,...r}))));export{n as channel,o as default};
