import{o as t,O as e,i as r,a as s,l as n,b as a,R as i,B as o,V as c,c as u,S as l,f,D as h,t as p,d as g,F as d,e as y,g as w,h as m,j as b,k as v,m as $,n as j,A as x,w as P}from"./with-resolvers-DgdAhYQ2.js";import{t as k}from"./global-D1K2q6W8.js";import{n as O}from"./shared-array-buffer-cwdMr2mc.js";let A=0;const M=A++,S=A++,B=A++,T=A++,_=A++,E=A++,R=A++,K=A++,L=A++,U=A++,W=A++,D=A++,F=A++,I=A++,q=A++;A++;const z=A++,V=A++,C=(t,e)=>new ArrayBuffer(t,{maxByteLength:e}),G=([t,e],r)=>{const s=r?t.byteLength:t.length;if(r){if(e){const r=C(s,e);new Uint8Array(r).set(new Uint8Array(t)),t=r}}else{const r=e?C(s,e):new ArrayBuffer(s);new Uint8Array(r).set(t),t=r}return t};const H=/\[('|")?(.+?)\1\]/g,J=(t,e)=>t?.[e];var N=t=>{const e=[],r=t=>{const r=e.splice(t);for(;t<r.length;)r[t++].delete(r[t++])};return class s extends Map{static keys=Symbol();static proto=Symbol();drop(t,e){return t!==s.proto&&super.delete(s.keys),super.delete(t),e}set(s,n){return((s,n)=>{e.push(s,n)<3&&setTimeout(r,t,0)})(super.set(s,n),s),n}}},Q=({reflect:P=r,transform:O=r,released:A=r,buffer:C=!1,timeout:Q=-1}=t)=>{const X=n(j),Y=n($),Z=t=>{if(!a(t))return t;const[r,s]=t;if(r&i)return rt(r,s);switch(r){case e:return mt;case h:return s;case l:return f(s);case u:return BigInt(s);case c:return(([t,e,r,s],n)=>{const a=G(e,n),i=globalThis[t];return s?new i(a,r,s):new i(a,r)})(s,C);case o:return G(s,C)}},tt=(t,r=new Map)=>{switch(typeof t){case"object":{if(null===t)break;if(t===globalThis)return wt;if(yt in t)return ut;let s=r.get(t);if(!s){const n=O(t);if(lt||!ct.has(n)){if(a(n)){const e=[];s=p(x,e),r.set(t,s);for(let t=0,s=n.length;t<s;t++)e[t]=tt(n[t],r);return s}if(!(y(n)||n instanceof ArrayBuffer||"Object"!==k(n))){const a={};s=p(e,a),r.set(t,s);for(const t in n)a[t]=tt(n[t],r);return s}}s=p(h,n),r.set(t,s)}return s}case"function":{if(yt in t)return ut;let e=r.get(t);if(!e){const s=O(t);e=p(d,ht(s)),r.set(t,e)}return e}case"symbol":return p(l,g(t))}return t},et=n(tt),rt=(e,r)=>{let s=dt.get(r),n=s?.deref();return n||(s&&bt.unregister(s),n=e===w?new Proxy(m,new ot(e,r)):new Proxy(e===v?t:b,new it(e,r)),s=new WeakRef(n),dt.set(r,s),bt.register(n,r,s)),n},st=t=>{switch(typeof t){case"object":if(null===t)break;case"function":return yt in t}return!1},nt=-1<Q,at=nt?N(Q):Map;class it{constructor(t,e){this.t=t,this.v=e,nt&&(this.$=new at)}get(t,e){if(nt&&this.$.has(e))return this.$.get(e);const r=P(U,this.v,$(e));return nt?r[0]?this.$.set(e,Z(r[1])):Z(r[1]):Z(r)}set(t,e,r){const s=P(z,this.v,$(e),tt(r));return nt?this.$.drop(e,s):s}has(t,e){return e===yt?(ut=[this.t,this.v],!0):P(F,this.v,$(e))}_oK(){return X(P(q,this.v),dt)}ownKeys(t){return nt?this.$.has(at.keys)?this.$.get(at.keys):this.$.set(at.keys,this._oK()):this._oK()}getOwnPropertyDescriptor(t,e){const r=Z(P(W,this.v,$(e)));if(r)for(const t in r)r[t]=Z(r[t]);return r}defineProperty(t,e,r){const s=P(K,this.v,$(e),tt(r));return nt?this.$.drop(e,s):s}deleteProperty(t,e){const r=P(L,this.v,$(e));return nt?this.$.drop(e,r):r}_gPO(){return Z(P(D,this.v))}getPrototypeOf(t){return nt?this.$.has(at.proto)?this.$.get(at.proto):this.$.set(at.proto,this._gPO()):this._gPO()}setPrototypeOf(t,e){const r=P(V,this.v,tt(e));return nt?this.$.drop(at.proto,r):r}isExtensible(t){return P(I,this.v)}preventExtensions(t){return!1}}class ot extends it{construct(t,e){return Z(P(R,this.v,et(e)))}apply(t,e,r){const s=new Map;return Z(P(E,this.v,tt(e,s),et(r,s)))}get(t,e){switch(e){case"apply":return(e,r)=>this.apply(t,e,r);case"call":return(e,...r)=>this.apply(t,e,r);default:return super.get(t,e)}}}let ct,ut,lt=!0;const{apply:ft}=Reflect,{id:ht,ref:pt,unref:gt}=((t=0,e=new Map,r=new Map)=>({clear:()=>{e.clear(),r.clear()},id:s=>{let n=r.get(s);if(void 0===n){for(;e.has(n=t++););e.set(n,s),r.set(s,n)}return n},ref:t=>e.get(t),unref:t=>(r.delete(e.get(t)),e.delete(t))}))(),dt=new Map,yt=Symbol("reflected-ffi"),wt=p(e,null),mt=new Proxy(t,new it(e,null)),bt=new FinalizationRegistry(t=>{dt.delete(t),P(M,t)});return{global:mt,isProxy:st,assign(t,...e){const r=st(t),n=s(r?{}:t,...e);return r&&P(S,ut[1],tt(n)),t},direct:t=>(lt&&(lt=!1,ct=new WeakSet),ct.add(t),t),evaluate:(t,...e)=>Z(P(B,null,function(t=this){return String(t).replace(/^(async\s*)?(\bfunction\b)?(.*?)\(/,(t,e,r,s)=>s&&!r?`${e||""}function ${s}(`:t)}(t),et(e))),gather(t,...e){const r=st(t),s=r?Z:e=>t[e];r&&(e=P(T,ut[1],Y(e,dt)));for(let t=0;t<e.length;t++)e[t]=s(e[t]);return e},query:(t,e)=>st(t)?Z(P(_,ut[1],e)):((t,e)=>e.replace(H,".$2").split(".").reduce(J,t))(t,e),reflect:async(t,e,...r)=>{switch(t){case E:{const[t,s]=r;for(let t=0,e=s.length;t<e;t++)s[t]=Z(s[t]);return tt(await ft(pt(e),Z(t),s))}case M:return A(pt(e)),gt(e)}}}};let X;if("importScripts"in globalThis){let t;const{promise:e,resolve:r}=P(),s=new URL(location).searchParams.get("reflected");t="message"===s?import("./message-HrRNTxf_.js"):"broadcast"===s?import("./broadcast-By0cJHF9.js"):"xhr"===s?import("./xhr-mth_w1Qg.js"):import("./async-BNBXm5a_.js"),X=async r=>{const{data:s,ports:n}=await e,{default:a}=await t,i=new Event("message");return i.data=s,i.ports=n,dispatchEvent(i),a(r)},addEventListener("message",r,{once:!0})}else X=O?"InstallTrigger"in globalThis?(await import("./broadcast-T4IUV-Lc.js")).default:(await import("./message-BapAw_-t.js")).default:navigator.serviceWorker?(await import("./xhr-Dj8Ktxnh.js")).default:(await import("./async-BRmx_40z.js").then(function(t){return t.a})).default;var Y=X,Z=async t=>{const e=await Y({...t,onsync:t=>t,onsend:t=>r.reflect(...t)}),r=Q({timeout:0,buffer:!0,...t,reflect:(...t)=>e(t)});return r};export{Z as default};
