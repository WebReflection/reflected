import{w as e}from"./with-resolvers-BbzrtcFW.js";import{s,d as t}from"./sender-BT8LRjVR.js";import{i as n}from"./i32-C78nBJH2.js";import"./channel-DAX11UfC.js";const{parse:r,stringify:o}=JSON,{promise:a,resolve:i}=e();addEventListener("message",({data:[e,s,t]})=>i([s,t]),{once:!0});const p="xhr";var c=e=>a.then(([a,i])=>(postMessage(1),((e,s)=>{const a=new BroadcastChannel(e),i=n(),p=(s.decoder??t)({byteOffset:0}),{serviceWorker:c}=s;return(t,...n)=>{const d=i();a.postMessage([d,t],...n);const f=new XMLHttpRequest;f.open("POST",c,!1),f.setRequestHeader("Content-Type","application/json"),f.send(o([d,e]));const{length:m,buffer:l}=new Uint8Array(r(f.responseText));return s.onsync(m?p(m,l):void 0)}})(i,s({...a,...e}))));export{p as channel,c as default};
