import{S as s,h as e,u as r,p as a}from"./shared-CWPvHWK8.js";import{w as t}from"./with-resolvers-CHEvl4oe.js";class o extends globalThis.Worker{constructor(t,o,n){const c=crypto.randomUUID(),d=new BroadcastChannel(c),p=s(o);d.addEventListener("message",e(p,o,!0)),super(...r(t,"broadcast",o)),super.addEventListener("message",()=>n(this),{once:!0}),super.postMessage(a(p,o).concat(c))}get channel(){return"broadcast"}}var n=(s,e)=>{const{promise:r,resolve:a}=t();return new o(s,e,a),r};export{n as default};
