const e=Promise.withResolvers||function(){var e,t,n=new this((n,s)=>{e=n,t=s});return{resolve:e,reject:t,promise:n}};var t=e.bind(Promise);const[n,s]=((e=e=>e)=>{const n=new Map,s=(()=>{const e=new Int32Array(1);return()=>e[0]++})();return[()=>{let r;do{r=e(s())}while(n.has(r));const a=t();return n.set(r,a),[r,a.promise]},(e,t,s)=>{const r=n.get(e);n.delete(e),s?r?.reject(s):r?.resolve(t)}]})(),{protocol:r,host:a,pathname:o}=location,i=`${r}//${a}${o}`,c=new BroadcastChannel("eac8422c-ea74-4190-9b8c-7966827497f0");c.addEventListener("message",({data:[e,t]})=>{if("response"===e){const[e,n]=t;s(e,`[${n.join(",")}]`)}});const d=async e=>{const[t,s]=n();return c.postMessage(["request",[t,e]]),new Response(await s)};addEventListener("activate",e=>e.waitUntil(clients.claim())),addEventListener("fetch",async e=>{const{request:t}=e;"POST"===t.method&&t.url.startsWith(i)&&(e.stopImmediatePropagation(),e.respondWith(t.json().then(d)),e.preventDefault())}),addEventListener("install",()=>skipWaiting());
