import{w as e}from"./with-resolvers-CHEvl4oe.js";import{i as s}from"./i32-C78nBJH2.js";import{s as t}from"./sender-BMLGKAss.js";import"./channel-CdS9bLt4.js";const{promise:r,resolve:a}=e();addEventListener("message",({data:[e,s,t]})=>a([e,s,t]),{once:!0});const n="async";var o=a=>r.then(([r,n,o])=>(postMessage(1),((t,r,a)=>{const n=new BroadcastChannel(t),o=s(),d=new Map;return n.addEventListener("message",({data:[e,s]})=>{r.set(s,0),d.get(e)(a.onsync(r.subarray(2,2+r[1]))),d.delete(e)}),(s,...t)=>{const{promise:r,resolve:a}=e(),i=o();return d.set(i,a),n.postMessage([i,s],...t),r}})(o,new Int32Array(r),t({...n,...a}))));export{n as channel,o as default};
