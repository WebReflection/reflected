import{S as e,h as s,u as r,p as a}from"./shared-CWPvHWK8.js";import{w as t}from"./with-resolvers-CHEvl4oe.js";class o extends globalThis.Worker{constructor(t,o,n){const{port1:p,port2:m}=new MessageChannel,g=e(o);p.addEventListener("message",s(g,o,!0)),p.start(),super(...r(t,"message",o)),super.addEventListener("message",()=>n(this),{once:!0}),super.postMessage(a(g,o),[m])}get channel(){return"message"}}var n=(e,s)=>{const{promise:r,resolve:a}=t();return new o(e,s,a),r};export{n as default};
